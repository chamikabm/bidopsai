# =============================================================================
# BidOpsAI Agent-Core Environment Configuration (Template)
# =============================================================================
# Copy this file to .env.development for local development
# Production values should be stored in AWS SSM Parameter Store and Secrets Manager

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_ENV=development
APP_VERSION_WORKFLOW=0.1.0
APP_VERSION_AI_ASSISTANT=0.1.0
LOG_LEVEL=INFO
DEBUG=false

# -----------------------------------------------------------------------------
# FastAPI Server Configuration
# -----------------------------------------------------------------------------
# Workflow Supervisor
WORKFLOW_HOST=0.0.0.0
WORKFLOW_PORT=8001

# AI Assistant Supervisor
AI_ASSISTANT_HOST=0.0.0.0
AI_ASSISTANT_PORT=8002

# -----------------------------------------------------------------------------
# PostgreSQL Database Configuration
# -----------------------------------------------------------------------------
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=bidopsai
DATABASE_USER=bidopsai
DATABASE_PASSWORD=your-secure-password-here
DATABASE_SSL_MODE=prefer
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30

# Connection string format
DATABASE_URL=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}

# -----------------------------------------------------------------------------
# AWS Configuration
# -----------------------------------------------------------------------------
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012

# AWS Credentials (for local development only - use IAM roles in production)
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key

# -----------------------------------------------------------------------------
# S3 Storage Configuration
# -----------------------------------------------------------------------------
S3_BUCKET_DOCUMENTS=bidopsai-documents-dev
S3_BUCKET_ARTIFACTS=bidopsai-artifacts-dev
S3_BUCKET_BDA_OUTPUT=bidopsai-bda-output-dev
S3_PRESIGNED_URL_EXPIRY=3600

# For local development with LocalStack
S3_ENDPOINT_URL=http://localhost:4566

# -----------------------------------------------------------------------------
# AWS Bedrock Configuration
# -----------------------------------------------------------------------------
BEDROCK_REGION=us-east-1
BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0
BEDROCK_MODEL_TEMPERATURE=0.7
BEDROCK_MODEL_MAX_TOKENS=4096
BEDROCK_MODEL_TOP_P=0.9

# Bedrock Knowledge Base
BEDROCK_KB_ID=your-knowledge-base-id
BEDROCK_KB_MODEL_ARN=arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0

# -----------------------------------------------------------------------------
# AWS AgentCore Configuration
# -----------------------------------------------------------------------------
AGENTCORE_RUNTIME_URL_WORKFLOW=https://workflow-agent.agentcore.aws
AGENTCORE_RUNTIME_URL_AI_ASSISTANT=https://ai-assistant.agentcore.aws

# AgentCore Memory Configuration
AGENTCORE_MEMORY_TTL_CONVERSATION=86400
AGENTCORE_MEMORY_TTL_WORKFLOW=604800
AGENTCORE_MEMORY_TTL_SESSION=1800
AGENTCORE_MEMORY_TTL_USER_PREFS=2592000

# -----------------------------------------------------------------------------
# AgentCore Gateway (MCP Tools)
# -----------------------------------------------------------------------------
AGENTCORE_GATEWAY_ENDPOINT=https://gateway.agentcore.aws
AGENTCORE_GATEWAY_SLACK_TOOL_ID=slack-integration
AGENTCORE_GATEWAY_EMAIL_TOOL_ID=email-integration

# -----------------------------------------------------------------------------
# MCP Server Configuration
# -----------------------------------------------------------------------------
# Bedrock Data Automation MCP Server
MCP_BDA_ENABLED=true
MCP_BDA_PROJECT_ID=your-bda-project-id
MCP_BDA_OUTPUT_BUCKET=${S3_BUCKET_BDA_OUTPUT}

# Slack MCP (via AgentCore Gateway)
MCP_SLACK_ENABLED=true
MCP_SLACK_WORKSPACE_ID=your-slack-workspace-id

# Email MCP
MCP_EMAIL_ENABLED=true
MCP_EMAIL_FROM_ADDRESS=proposals@bidopsai.com
MCP_EMAIL_FROM_NAME=BidOpsAI Proposals Team

# -----------------------------------------------------------------------------
# Observability Configuration
# -----------------------------------------------------------------------------
# LangFuse
LANGFUSE_ENABLED=true
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key
LANGFUSE_HOST=https://cloud.langfuse.com

# OpenTelemetry (OTEL) Configuration
OTEL_ENABLED=true
OTEL_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=bidopsai-agent-core
OTEL_EXPORT_INTERVAL_MS=60000

# CloudWatch Integration
CLOUDWATCH_NAMESPACE=BidOpsAI/AgentCore
CLOUDWATCH_LOG_GROUP=/aws/agentcore/bidopsai
CLOUDWATCH_LOG_STREAM_WORKFLOW=workflow-supervisor
CLOUDWATCH_LOG_STREAM_AI_ASSISTANT=ai-assistant-supervisor

# AgentCore Observability
AGENTCORE_OBSERVABILITY_ENABLED=true
AGENTCORE_TRACING_ENABLED=true
AGENTCORE_METRICS_ENABLED=true

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------
# Workflow concurrency
MAX_CONCURRENT_WORKFLOWS=20
WORKFLOW_TIMEOUT_SECONDS=3600

# Retry policies
AGENT_MAX_RETRIES=3
AGENT_RETRY_DELAY_SECONDS=5
AGENT_RETRY_BACKOFF_MULTIPLIER=2

# LLM structured output
STRUCTURED_OUTPUT_MODE=strict
STRUCTURED_OUTPUT_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# SSM Parameter Store & Secrets Manager (Production)
# -----------------------------------------------------------------------------
# These parameters are loaded from AWS in production
SSM_PARAMETER_PREFIX=/bidopsai/prod
SECRETS_MANAGER_SECRET_NAME=bidopsai/agents/prod

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_AI_ASSISTANT=false
ENABLE_CONVERSATION_HISTORY=true
ENABLE_CHECKPOINT_RECOVERY=true
ENABLE_ERROR_NOTIFICATIONS=true

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Cognito User Pool (for AgentCore Identity integration)
COGNITO_USER_POOL_ID=us-east-1_XXXXXXXXX
COGNITO_USER_POOL_CLIENT_ID=your-client-id
COGNITO_USER_POOL_REGION=us-east-1

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://app.bidopsai.com
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Development Tools
# -----------------------------------------------------------------------------
# Hot reload
UVICORN_RELOAD=true
UVICORN_RELOAD_DIRS=agents,supervisors,tools,prompts,models,core

# Debug
DEBUGPY_ENABLED=false
DEBUGPY_PORT=5678